{% load humanize %}

<div
    class="bg-white rounded-xl shadow-md hover:scale-[1.02] transition-transform duration-300 overflow-hidden flex flex-col sm:flex-row">

    <!-- Thumbnail -->
    <div class="sm:w-1/3 w-full">
        {% if product.thumbnail %}
        <img src="{{ product.thumbnail }}" alt="{{ product.name }}" class="h-48 sm:h-full w-full object-cover">
        {% else %}
        <div class="h-48 sm:h-full w-full bg-blue-100 flex items-center justify-center text-blue-400">
            No Image
        </div>
        {% endif %}
    </div>

    <!-- Content -->
    <div class="p-5 flex flex-col justify-between sm:w-2/3">
        <div>
            <h3 class="text-xl font-semibold text-gray-900 mb-2 line-clamp-1">
                {{ product.name }}
            </h3>
            <p class="text-gray-700 text-sm line-clamp-2 mb-3">
                {{ product.description|truncatewords:20 }}
            </p>
            <p class="text-blue-600 font-bold text-lg mb-4">
                Rp {{ product.price|intcomma }}
            </p>
        </div>

        <!-- Action Buttons -->
        <div class="flex space-x-3">
            <a href="{% url 'main:show_product' product.id %}"
                class="px-3 py-1 rounded-md border border-blue-300 text-blue-600 hover:bg-blue-50 text-sm transition">
                Detail
            </a>

            <!-- Edit/Delete-->
            {% if user.is_authenticated and product.user == user %}
            <a href="{% url 'main:edit_product' product.id %}"
                class="px-3 py-1 rounded-md border border-gray-300 text-gray-600 hover:bg-gray-100 text-sm transition">
                Edit
            </a>
            <a href="{% url 'main:delete_product' product.id %}"
                class="px-3 py-1 rounded-md border border-red-300 text-red-600 hover:bg-red-50 text-sm transition">
                Delete
            </a>
            {% endif %}
        </div>
    </div>
</div>